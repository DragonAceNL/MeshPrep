{
  "version": "1.0.0",
  "categories": [
    {
      "id": "cleanup",
      "name": "Loading & Basic Cleanup",
      "actions": [
        {
          "name": "trimesh_basic",
          "display_name": "Basic Cleanup",
          "tool": "trimesh",
          "description": "Load and apply basic cleanup: merge duplicate vertices, remove degenerate faces, remove infinite values.",
          "parameters": [
            {
              "name": "merge_tex",
              "type": "bool",
              "default": true,
              "description": "Merge texture coordinates"
            },
            {
              "name": "merge_norm",
              "type": "bool",
              "default": true,
              "description": "Merge normals"
            }
          ],
          "dry_run_supported": true,
          "destructive": true
        },
        {
          "name": "merge_vertices",
          "display_name": "Merge Vertices",
          "tool": "trimesh",
          "description": "Weld duplicate vertices within a tolerance. Reduces vertex count and fixes small gaps.",
          "parameters": [
            {
              "name": "eps",
              "type": "float",
              "default": 1e-8,
              "description": "Distance threshold for merging"
            }
          ],
          "dry_run_supported": true,
          "destructive": true
        },
        {
          "name": "remove_degenerate_faces",
          "display_name": "Remove Degenerate Faces",
          "tool": "trimesh",
          "description": "Remove faces with zero area or invalid topology.",
          "parameters": [],
          "dry_run_supported": true,
          "destructive": true
        }
      ]
    },
    {
      "id": "hole_filling",
      "name": "Hole Filling",
      "actions": [
        {
          "name": "fill_holes",
          "display_name": "Fill Holes",
          "tool": "trimesh",
          "description": "Fill holes in the mesh up to a maximum size. Useful for closing small gaps.",
          "parameters": [
            {
              "name": "max_hole_size",
              "type": "int",
              "default": 1000,
              "description": "Maximum hole size in edges"
            },
            {
              "name": "method",
              "type": "enum",
              "default": "fan",
              "enum_values": ["fan", "ear"],
              "description": "Fill method"
            }
          ],
          "dry_run_supported": true,
          "destructive": true
        }
      ]
    },
    {
      "id": "normals",
      "name": "Normal Correction",
      "actions": [
        {
          "name": "recalculate_normals",
          "display_name": "Recalculate Normals",
          "tool": "trimesh",
          "description": "Recompute face normals from vertex winding order.",
          "parameters": [],
          "dry_run_supported": true,
          "destructive": true
        },
        {
          "name": "fix_normals",
          "display_name": "Fix Normals",
          "tool": "trimesh",
          "description": "Combine recalculate and reorient for a single-step fix.",
          "parameters": [],
          "dry_run_supported": true,
          "destructive": true
        },
        {
          "name": "flip_normals",
          "display_name": "Flip Normals",
          "tool": "trimesh",
          "description": "Invert all face normals (useful if model is inside-out).",
          "parameters": [],
          "dry_run_supported": true,
          "destructive": true
        }
      ]
    },
    {
      "id": "components",
      "name": "Component Management",
      "actions": [
        {
          "name": "remove_small_components",
          "display_name": "Remove Small Components",
          "tool": "trimesh",
          "description": "Remove disconnected components below a threshold.",
          "parameters": [
            {
              "name": "min_faces",
              "type": "int",
              "default": 100,
              "description": "Minimum faces to keep"
            }
          ],
          "dry_run_supported": true,
          "destructive": true
        },
        {
          "name": "boolean_union",
          "display_name": "Boolean Union",
          "tool": "trimesh",
          "description": "Merge overlapping shells into a single watertight mesh.",
          "parameters": [],
          "dry_run_supported": false,
          "destructive": true
        },
        {
          "name": "remove_internal_geometry",
          "display_name": "Remove Internal Geometry",
          "tool": "trimesh",
          "description": "Remove components fully enclosed by the outer shell.",
          "parameters": [],
          "dry_run_supported": true,
          "destructive": true
        }
      ]
    },
    {
      "id": "repair",
      "name": "Repair & Manifold Fixes",
      "actions": [
        {
          "name": "pymeshfix_repair",
          "display_name": "PyMeshFix Repair",
          "tool": "pymeshfix",
          "description": "Run pymeshfix's automatic repair pass. Fixes many non-manifold issues.",
          "parameters": [],
          "dry_run_supported": false,
          "destructive": true
        }
      ]
    },
    {
      "id": "simplification",
      "name": "Simplification & Remeshing",
      "actions": [
        {
          "name": "decimate",
          "display_name": "Decimate",
          "tool": "trimesh",
          "description": "Reduce face count while preserving shape.",
          "parameters": [
            {
              "name": "target_ratio",
              "type": "float",
              "default": 0.5,
              "description": "Target ratio of faces to keep"
            },
            {
              "name": "target_faces",
              "type": "int",
              "default": null,
              "description": "Target face count (overrides ratio)"
            }
          ],
          "dry_run_supported": true,
          "destructive": true
        },
        {
          "name": "smooth_laplacian",
          "display_name": "Laplacian Smooth",
          "tool": "trimesh",
          "description": "Apply Laplacian smoothing to reduce noise.",
          "parameters": [
            {
              "name": "iterations",
              "type": "int",
              "default": 1,
              "description": "Smoothing iterations"
            }
          ],
          "dry_run_supported": true,
          "destructive": true
        }
      ]
    },
    {
      "id": "geometry",
      "name": "Geometry Analysis",
      "actions": [
        {
          "name": "identify_thin_regions",
          "display_name": "Identify Thin Regions",
          "tool": "internal",
          "description": "Detect regions thinner than a threshold; report but do not modify.",
          "parameters": [
            {
              "name": "min_thickness",
              "type": "float",
              "default": 0.8,
              "description": "Minimum thickness (mm)"
            }
          ],
          "dry_run_supported": true,
          "destructive": false
        },
        {
          "name": "thicken_regions",
          "display_name": "Thicken Regions",
          "tool": "blender",
          "description": "Thicken thin walls to meet minimum printable thickness.",
          "parameters": [
            {
              "name": "target_thickness",
              "type": "float",
              "default": 1.0,
              "description": "Target thickness (mm)"
            }
          ],
          "dry_run_supported": false,
          "destructive": true
        }
      ]
    },
    {
      "id": "validation",
      "name": "Validation & Diagnostics",
      "actions": [
        {
          "name": "validate",
          "display_name": "Validate",
          "tool": "internal",
          "description": "Run all validation checks and produce a diagnostics report.",
          "parameters": [],
          "dry_run_supported": true,
          "destructive": false
        },
        {
          "name": "compute_diagnostics",
          "display_name": "Compute Diagnostics",
          "tool": "internal",
          "description": "Compute full diagnostics vector for profile detection.",
          "parameters": [],
          "dry_run_supported": true,
          "destructive": false
        }
      ]
    },
    {
      "id": "export",
      "name": "Export",
      "actions": [
        {
          "name": "export_stl",
          "display_name": "Export STL",
          "tool": "trimesh",
          "description": "Export mesh to STL file.",
          "parameters": [
            {
              "name": "path",
              "type": "path",
              "default": null,
              "description": "Output path"
            },
            {
              "name": "ascii",
              "type": "bool",
              "default": false,
              "description": "Use ASCII format"
            }
          ],
          "dry_run_supported": false,
          "destructive": false
        }
      ]
    },
    {
      "id": "blender",
      "name": "Blender (Escalation)",
      "actions": [
        {
          "name": "blender_remesh",
          "display_name": "Blender Remesh",
          "tool": "blender",
          "description": "Apply Blender's voxel remesh for aggressive topology repair.",
          "parameters": [
            {
              "name": "voxel_size",
              "type": "float",
              "default": 0.1,
              "description": "Voxel size"
            }
          ],
          "dry_run_supported": false,
          "destructive": true
        },
        {
          "name": "blender_boolean_union",
          "display_name": "Blender Boolean Union",
          "tool": "blender",
          "description": "Merge all mesh parts using Blender's boolean solver.",
          "parameters": [],
          "dry_run_supported": false,
          "destructive": true
        },
        {
          "name": "blender_solidify",
          "display_name": "Blender Solidify",
          "tool": "blender",
          "description": "Add thickness to thin surfaces using the solidify modifier.",
          "parameters": [
            {
              "name": "thickness",
              "type": "float",
              "default": 1.0,
              "description": "Wall thickness"
            }
          ],
          "dry_run_supported": false,
          "destructive": true
        }
      ]
    }
  ]
}
